# ============================================================================
# Multi-Agent Forex Scalping System - Enhanced Requirements
# Includes InsightSentry + DataBento + TimescaleDB integration
# ============================================================================

# Core dependencies (existing)
langchain==0.3.13
langchain-openai==0.2.13
langchain-anthropic==0.3.4
langchain-community==0.3.13
tavily-python==0.5.0
python-dotenv==1.0.1

# IG Markets trading API
trading-ig==0.0.25

# Database - PostgreSQL with TimescaleDB
psycopg[binary,pool]==3.2.3  # PostgreSQL adapter with connection pooling
asyncpg==0.29.0              # Async PostgreSQL adapter

# DataBento - CME Futures Order Flow & L2 Depth
databento==0.42.0            # Official DataBento Python client
databento-dbn==0.22.0        # DBN format support

# HTTP & WebSocket clients
aiohttp==3.11.11             # Async HTTP client for InsightSentry
websockets==14.1             # WebSocket client (for InsightSentry WS)
requests==2.32.3             # Sync HTTP fallback

# Data processing & numerical computation
numpy==2.2.1                 # Numerical arrays
pandas==2.2.3                # Data frames (optional, for analysis)
numba==0.60.0                # JIT compilation for VPIN/OFI (optional but recommended)

# Async utilities
uvloop==0.21.0               # Fast event loop for asyncio (Linux/Mac only)

# Logging & monitoring
structlog==24.4.0            # Structured logging
prometheus-client==0.21.0    # Prometheus metrics exporter

# Configuration & utilities
pydantic==2.10.4             # Data validation
pytz==2024.2                 # Timezone handling

# Testing
pytest==8.3.4
pytest-asyncio==0.25.2

# Optional: Redis for caching (Phase 4)
# redis==5.2.1
# aioredis==2.0.1

# ============================================================================
# Installation Notes
# ============================================================================
#
# 1. PostgreSQL + TimescaleDB Setup (macOS):
#    brew install postgresql@14
#    brew install timescaledb
#
#    # Start PostgreSQL
#    brew services start postgresql@14
#
#    # Enable TimescaleDB extension
#    psql postgres -c "CREATE EXTENSION IF NOT EXISTS timescaledb CASCADE;"
#
# 2. PostgreSQL + TimescaleDB Setup (Ubuntu/Debian):
#    sudo apt-get install postgresql-14 postgresql-client-14
#    sudo sh -c "echo 'deb [signed-by=/usr/share/keyrings/timescale.keyring] https://packagecloud.io/timescale/timescaledb/ubuntu/ $(lsb_release -c -s) main' > /etc/apt/sources.list.d/timescaledb.list"
#    wget --quiet -O - https://packagecloud.io/timescale/timescaledb/gpgkey | sudo gpg --dearmor -o /usr/share/keyrings/timescale.keyring
#    sudo apt-get update
#    sudo apt-get install timescaledb-2-postgresql-14
#    sudo timescaledb-tune
#
# 3. Create Database:
#    python database_manager.py setup
#
# 4. Test Connections:
#    python insightsentry_client.py         # Test InsightSentry REST API
#    python order_book_l2.py                # Test order book logic
#    python database_manager.py test        # Test database connection
#
# 5. Start Services:
#    python news_gating_service.py          # Start news gating
#    python databento_client.py             # Start DataBento streaming (requires market hours)
#
# ============================================================================
# Performance Recommendations
# ============================================================================
#
# For production deployment:
# - Use uvloop for 2-3x faster async I/O (pip install uvloop)
# - Install numba for 5-10x faster OFI/VPIN calculations (pip install numba)
# - Enable PostgreSQL query optimization:
#   - shared_buffers = 256MB
#   - effective_cache_size = 1GB
#   - max_connections = 100
# - Monitor with prometheus-client
#
# ============================================================================
